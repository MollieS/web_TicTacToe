@import ttt.game.Marks
@import ttt.game.Board
@import ttt.game.GameEngine

@(board: Board, game: GameEngine, gametype: String)

@main("Tic Tac Toe") {
    <body>
        <h1>Tic Tac Toe</h1>

        <h3 id="gametype">@gametype</h3>

        <p>@game.currentMark()'s turn</p>

        <table id="board">
        @for((row, index) <- board.getRows.zipWithIndex) {
            <tr>
            @for((cell, position) <- row.zipWithIndex) {
                <th class="cell">
                @if(cell == Marks.NULL) {
                    @if(!game.isOver) {
                        <form METHOD="post" action="/newMove">
                            <input type="hidden" value="@index" name="rowNumber"/>
                            <input type="hidden" value="@position" name="cellPosition"/>
                            <input type="submit" class="cellButton" value=" "/>
                        </form>
                    } else {
                        <p class="mark"> </p>
                    }
                } else {
                    <p class="mark"> @cell <p/>
                }
                </th>
            }
            </tr>
        }
        </table>
        <section>
        @if(game.isOver) {
            @if(game.isWon) {
                <p>@game.winningMark() wins!<p>
            } else {
                <p>It's a draw!</p>
            }
        }
        </section>
    </body>
}